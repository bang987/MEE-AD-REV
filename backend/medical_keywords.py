"""
의료광고 금지 키워드 데이터베이스
의료법 제56조 및 관련 조항 기반
"""

from typing import Dict, List, Tuple

class MedicalKeywordDB:
    """의료광고 금지 키워드 관리 클래스"""

    def __init__(self):
        # 키워드: (카테고리, 심각도, 법조항, 설명)
        self.keywords: Dict[str, Tuple[str, str, str, str]] = {
            # 1. 절대적 표현 (10개) - HIGH
            "100%": ("절대적 표현", "HIGH", "의료법 제56조 제2항 제1호", "절대적 효과 보장 표현 금지"),
            "완치": ("절대적 표현", "HIGH", "의료법 제56조 제2항 제1호", "완전한 치료 보장 표현 금지"),
            "완전": ("절대적 표현", "HIGH", "의료법 제56조 제2항 제1호", "절대적 효과 표현 금지"),
            "반드시": ("절대적 표현", "HIGH", "의료법 제56조 제2항 제1호", "확실성 보장 표현 금지"),
            "무조건": ("절대적 표현", "HIGH", "의료법 제56조 제2항 제1호", "절대적 효과 보장 금지"),
            "영구적": ("절대적 표현", "HIGH", "의료법 제56조 제2항 제1호", "영구 효과 보장 금지"),
            "영원히": ("절대적 표현", "HIGH", "의료법 제56조 제2항 제1호", "영구 효과 보장 금지"),
            "평생": ("절대적 표현", "HIGH", "의료법 제56조 제2항 제1호", "영구 효과 보장 금지"),
            "절대": ("절대적 표현", "HIGH", "의료법 제56조 제2항 제1호", "절대적 표현 금지"),
            "보장": ("절대적 표현", "HIGH", "의료법 제56조 제2항 제1호", "효과 보장 표현 금지"),

            # 2. 최상급 표현 (10개) - HIGH
            "최고": ("최상급 표현", "HIGH", "의료법 제56조 제2항 제2호", "최상급 비교 표현 금지"),
            "최상": ("최상급 표현", "HIGH", "의료법 제56조 제2항 제2호", "최상급 비교 표현 금지"),
            "최고급": ("최상급 표현", "HIGH", "의료법 제56조 제2항 제2호", "최상급 비교 표현 금지"),
            "최대": ("최상급 표현", "HIGH", "의료법 제56조 제2항 제2호", "최상급 비교 표현 금지"),
            "최첨단": ("최상급 표현", "HIGH", "의료법 제56조 제2항 제2호", "최상급 기술 표현 금지"),
            "세계최고": ("최상급 표현", "HIGH", "의료법 제56조 제2항 제2호", "최상급 비교 표현 금지"),
            "국내최고": ("최상급 표현", "HIGH", "의료법 제56조 제2항 제2호", "최상급 비교 표현 금지"),
            "업계1위": ("최상급 표현", "HIGH", "의료법 제56조 제2항 제2호", "순위 비교 표현 금지"),
            "1등": ("최상급 표현", "HIGH", "의료법 제56조 제2항 제2호", "순위 비교 표현 금지"),
            "넘버원": ("최상급 표현", "HIGH", "의료법 제56조 제2항 제2호", "순위 비교 표현 금지"),

            # 3. 효능 과장 (12개) - HIGH/MEDIUM
            "즉시": ("효능 과장", "HIGH", "의료법 제56조 제2항 제1호", "즉각 효과 과장 금지"),
            "즉각": ("효능 과장", "HIGH", "의료법 제56조 제2항 제1호", "즉각 효과 과장 금지"),
            "당일": ("효능 과장", "MEDIUM", "의료법 제56조 제2항 제1호", "단기 효과 과장 주의"),
            "하루만에": ("효능 과장", "HIGH", "의료법 제56조 제2항 제1호", "단기 효과 과장 금지"),
            "단 하루": ("효능 과장", "HIGH", "의료법 제56조 제2항 제1호", "단기 효과 과장 금지"),
            "기적": ("효능 과장", "HIGH", "의료법 제56조 제2항 제1호", "비현실적 효과 과장 금지"),
            "기적같은": ("효능 과장", "HIGH", "의료법 제56조 제2항 제1호", "비현실적 효과 과장 금지"),
            "놀라운": ("효능 과장", "MEDIUM", "의료법 제56조 제2항 제1호", "과도한 효과 강조 주의"),
            "획기적": ("효능 과장", "MEDIUM", "의료법 제56조 제2항 제1호", "과도한 효과 강조 주의"),
            "혁명적": ("효능 과장", "MEDIUM", "의료법 제56조 제2항 제1호", "과도한 효과 강조 주의"),
            "특효": ("효능 과장", "HIGH", "의료법 제56조 제2항 제1호", "특별 효과 과장 금지"),
            "만병통치": ("효능 과장", "HIGH", "의료법 제56조 제2항 제1호", "만능 효과 과장 금지"),

            # 4. 비교 광고 (4개) - MEDIUM
            "타병원": ("비교 광고", "MEDIUM", "의료법 제56조 제2항 제3호", "다른 의료기관 비교 금지"),
            "다른병원": ("비교 광고", "MEDIUM", "의료법 제56조 제2항 제3호", "다른 의료기관 비교 금지"),
            "타의추종": ("비교 광고", "MEDIUM", "의료법 제56조 제2항 제3호", "비교 우위 표현 금지"),
            "경쟁업체": ("비교 광고", "MEDIUM", "의료법 제56조 제2항 제3호", "다른 의료기관 비교 금지"),

            # 5. 환자 유인 (9개) - MEDIUM/LOW
            "무료": ("환자 유인", "MEDIUM", "의료법 제27조 제3항", "부당한 환자 유인 금지"),
            "공짜": ("환자 유인", "MEDIUM", "의료법 제27조 제3항", "부당한 환자 유인 금지"),
            "이벤트": ("환자 유인", "MEDIUM", "의료법 제27조 제3항", "할인 이벤트성 광고 제한"),
            "할인": ("환자 유인", "MEDIUM", "의료법 제27조 제3항", "가격 할인 광고 제한"),
            "특가": ("환자 유인", "MEDIUM", "의료법 제27조 제3항", "가격 할인 광고 제한"),
            "사은품": ("환자 유인", "LOW", "의료법 제27조 제3항", "부당 경품 제공 금지"),
            "경품": ("환자 유인", "LOW", "의료법 제27조 제3항", "부당 경품 제공 금지"),
            "선착순": ("환자 유인", "LOW", "의료법 제27조 제3항", "긴급성 조장 제한"),
            "마감임박": ("환자 유인", "LOW", "의료법 제27조 제3항", "긴급성 조장 제한"),

            # 6. 기타 위반 표현 (5개) - MEDIUM/LOW
            "전문의": ("자격 오표시", "LOW", "의료법 제56조 제1항", "허위 자격 표시 금지"),
            "전문병원": ("자격 오표시", "MEDIUM", "의료법 제56조 제1항", "허위 지정 표시 금지"),
            "인증병원": ("자격 오표시", "MEDIUM", "의료법 제56조 제1항", "허위 인증 표시 금지"),
            "유명": ("근거 없는 표현", "LOW", "의료법 제56조 제2항", "객관적 근거 없는 표현"),
            "입소문": ("근거 없는 표현", "LOW", "의료법 제56조 제2항", "객관적 근거 없는 표현"),
        }

    def get_all_keywords(self) -> List[str]:
        """모든 키워드 목록 반환"""
        return list(self.keywords.keys())

    def get_keyword_info(self, keyword: str) -> Tuple[str, str, str, str]:
        """특정 키워드의 상세 정보 반환"""
        return self.keywords.get(keyword, ("알 수 없음", "LOW", "해당 없음", ""))

    def get_keywords_by_category(self, category: str) -> List[str]:
        """카테고리별 키워드 목록 반환"""
        return [k for k, v in self.keywords.items() if v[0] == category]

    def get_keywords_by_severity(self, severity: str) -> List[str]:
        """심각도별 키워드 목록 반환"""
        return [k for k, v in self.keywords.items() if v[1] == severity]

    def get_severity_score(self, severity: str) -> int:
        """심각도에 따른 점수 반환"""
        scores = {
            "HIGH": 30,
            "MEDIUM": 15,
            "LOW": 5
        }
        return scores.get(severity, 0)

    def get_categories(self) -> List[str]:
        """모든 카테고리 목록 반환"""
        return list(set([v[0] for v in self.keywords.values()]))

    def get_statistics(self) -> Dict[str, int]:
        """키워드 통계 반환"""
        stats = {
            "total": len(self.keywords),
            "high": len(self.get_keywords_by_severity("HIGH")),
            "medium": len(self.get_keywords_by_severity("MEDIUM")),
            "low": len(self.get_keywords_by_severity("LOW")),
        }
        return stats


# 싱글톤 인스턴스
keyword_db = MedicalKeywordDB()


if __name__ == "__main__":
    # 테스트 코드
    db = MedicalKeywordDB()
    print(f"총 키워드 수: {len(db.get_all_keywords())}")
    print(f"\n카테고리: {db.get_categories()}")
    print(f"\n통계: {db.get_statistics()}")

    print("\n=== HIGH 심각도 키워드 ===")
    for kw in db.get_keywords_by_severity("HIGH")[:5]:
        info = db.get_keyword_info(kw)
        print(f"- {kw}: {info[0]} ({info[2]})")
