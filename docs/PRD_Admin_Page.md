# PRD: 관리자 페이지 - RAG 문서 관리 기능

## 📋 문서 정보
- **기능명**: 관리자 페이지 (RAG 문서 관리)
- **버전**: v1.0
- **작성일**: 2026년 1월 6일
- **상태**: 구현 완료

---

## 🎯 목표
의료법 관련 문서(RAG 임베딩 대상)를 관리자가 웹 UI를 통해 업로드/삭제할 수 있는 관리자 페이지 구현

---

## 📌 요구사항

### 1. 메인 화면 수정
| 항목 | 설명 |
|------|------|
| 위치 | 초기 화면 상단 오른쪽 |
| 요소 | "Admin" 링크 버튼 |
| 동작 | 클릭 시 관리자 화면으로 이동 |

### 2. 관리자 화면 기능

#### 2.1 문서 목록 표시
- **시점**: 페이지 진입 시 자동 로드
- **대상**: `backend/data/` 폴더 내 파일
- **표시 정보**:
  - 파일명
  - 파일 크기
  - 파일 형식 (txt/pdf)
  - 업로드 날짜 (수정일)
- **정렬**: 파일명 기준 오름차순

#### 2.2 문서 삭제
- **방식**: 각 파일 행에 삭제 버튼
- **확인**: 삭제 전 확인 다이얼로그 표시
- **동작**:
  - `backend/data/` 폴더에서 파일 삭제
  - 삭제 후 목록 자동 갱신

#### 2.3 문서 업로드
- **지원 형식**: `.txt`, `.pdf`
- **다중 선택**: 여러 파일 한번에 업로드 가능
- **파일 크기 제한**: 개별 파일 최대 50MB
- **동작**:
  - 사용자 PC에서 파일 선택
  - `backend/data/` 폴더에 저장
  - 업로드 완료 후 목록 자동 갱신

---

## 🏗️ 기술 설계

### Backend API

#### GET /api/admin/documents
문서 목록 조회
```json
// Response
{
  "success": true,
  "documents": [
    {
      "filename": "medical_law_56.txt",
      "size": 12345,
      "type": "txt",
      "modified": "2026-01-06T12:00:00"
    }
  ],
  "total_count": 5
}
```

#### POST /api/admin/documents
문서 업로드 (multipart/form-data)
```json
// Response
{
  "success": true,
  "uploaded": ["file1.pdf", "file2.txt"],
  "failed": [],
  "message": "2개 파일 업로드 완료"
}
```

#### DELETE /api/admin/documents/{filename}
문서 삭제
```json
// Response
{
  "success": true,
  "message": "file1.pdf 삭제 완료"
}
```

### Frontend

#### 파일 구조
```
frontend/
├── index.html          # 기존 (Admin 링크 추가)
└── admin.html          # 신규 (관리자 페이지)
```

#### admin.html 구성
```
┌────────────────────────────────────────────────────┐
│  ← 메인으로    🔧 RAG 문서 관리                      │
├────────────────────────────────────────────────────┤
│                                                    │
│  📤 문서 업로드                                     │
│  ┌──────────────────────────────────────────────┐ │
│  │  [파일 선택] (.txt, .pdf)                     │ │
│  │  선택된 파일: file1.pdf, file2.txt (2개)      │ │
│  │                      [업로드]                 │ │
│  └──────────────────────────────────────────────┘ │
│                                                    │
│  📁 등록된 문서 목록 (5개)                          │
│  ┌──────────────────────────────────────────────┐ │
│  │ 파일명              크기     형식   삭제      │ │
│  ├──────────────────────────────────────────────┤ │
│  │ medical_law_56.txt  12KB    TXT   [삭제]     │ │
│  │ 심의기준.pdf         1.2MB   PDF   [삭제]     │ │
│  │ 제23조.txt          8KB     TXT   [삭제]     │ │
│  └──────────────────────────────────────────────┘ │
│                                                    │
└────────────────────────────────────────────────────┘
```

---

## 📋 체크리스트

### Backend
- [x] GET /api/admin/documents 엔드포인트 구현
- [x] POST /api/admin/documents 엔드포인트 구현
- [x] DELETE /api/admin/documents/{filename} 엔드포인트 구현
- [x] 파일 형식 검증 (.txt, .pdf만 허용)
- [x] 파일 크기 제한 (50MB)

### Frontend - index.html
- [x] 상단 오른쪽에 Admin 링크 추가

### Frontend - admin.html
- [x] 페이지 레이아웃 구현
- [x] 문서 목록 테이블 구현
- [x] 파일 업로드 UI 구현 (다중 선택, 드래그 앤 드롭)
- [x] 삭제 기능 구현 (확인 다이얼로그)
- [x] 메인 페이지로 돌아가기 링크

---

## ⚠️ 고려사항

### 보안
- 관리자 페이지 접근 제한 (MVP에서는 미구현, 추후 인증 추가)
- 파일 확장자 검증 필수
- 경로 traversal 공격 방지 (../ 등)

### UX
- 업로드 진행률 표시
- 성공/실패 피드백 메시지
- 파일 목록 실시간 갱신

### 향후 확장
- [ ] RAG 재인덱싱 버튼 (업로드 후 자동 or 수동)
- [ ] 문서 미리보기
- [ ] 관리자 인증

---

## 📅 구현 순서

1. **Backend API** (30분)
   - 문서 목록/업로드/삭제 API 구현

2. **index.html 수정** (5분)
   - Admin 링크 추가

3. **admin.html 생성** (45분)
   - 전체 UI 및 기능 구현

4. **테스트** (10분)
   - 업로드/삭제/목록 기능 테스트

---

**예상 소요 시간: 약 1시간 30분**
